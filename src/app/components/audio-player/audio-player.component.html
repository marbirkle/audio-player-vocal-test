<StackLayout
  class="audio-player-container p-4 bg-gray-900 rounded-lg"
  [opacity]="isAudioReady() ? 1 : 0.5"
>
  <!-- Col 0 = botón, Col 1 = separación, Col 2 = contenido -->

  <GridLayout columns="60, 12, *" rows="auto, auto" verticalAlignment="center">
    <!-- Indicador de carga (spinner) -->
    <ActivityIndicator
      [busy]="isLoading()"
      [visibility]="isLoading() ? 'visible' : 'collapse'"
      col="0"
      rowSpan="2"
      class="loading-spinner"
    ></ActivityIndicator>

    <!-- Botón play/stop -->
    <Button
      #playBtn
      [text]="isPlaying() ? '⏹' : '▶️'"
      [isEnabled]="isAudioReady()"
      [visibility]="isLoading() ? 'collapse' : 'visible'"
      class="play-btn"
      (tap)="onPlayTap(playBtn)"
      col="0"
      rowSpan="2"
    ></Button>

    <!-- Fila superior: nombre + contador -->
    <GridLayout col="2" row="0" columns="*, auto" verticalAlignment="center">
      <Label
        [text]="fileDate()"
        class="text-white text-base font-bold"
        col="0"
        verticalAlignment="center"
      ></Label>

      <Label
        [text]="displayedTime()"
        class="text-white text-base text-right"
        col="1"
        verticalAlignment="center"
      ></Label>
    </GridLayout>

    <!-- Fila inferior: barra de progreso -->
    <Progress
      [value]="progressValue()"
      [maxValue]="duration()"
      class="audio-progress"
      col="2"
      row="1"
    ></Progress>
  </GridLayout>
</StackLayout>
